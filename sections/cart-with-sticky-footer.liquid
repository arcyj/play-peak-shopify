{{ 'component-cart.css' | asset_url | stylesheet_tag }}
{{ 'component-cart-items.css' | asset_url | stylesheet_tag }}
{{ 'component-totals.css' | asset_url | stylesheet_tag }}
{{ 'component-price.css' | asset_url | stylesheet_tag }}
{{ 'component-discounts.css' | asset_url | stylesheet_tag }}
{{ 'quantity-popover.css' | asset_url | stylesheet_tag }}

{%- style -%}
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
      padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
    }

    @media screen and (min-width: 750px) {
      .section-{{ section.id }}-padding {
        padding-top: {{ section.settings.padding_top }}px;
        padding-bottom: {{ section.settings.padding_bottom }}px;
      }
    }

    @media screen and (min-width: 750px) {
    .cart-footer-sticky {
      display: block;
      position: sticky;
      top: 70px;
      z-index: 2;
    }
  }
{%- endstyle -%}

{%- unless settings.cart_type == 'drawer' -%}
  <script src='{{ 'cart.js' | asset_url }}' defer='defer'></script>
{%- endunless -%}

<script src='{{ 'quantity-popover.js' | asset_url }}' defer='defer'></script>

<div class='cart-container-{{ section.id }} section-{{ section.id }}-padding'>
  <div class='page-width'>
    <div class='tw-text-center tw-pt-24 tw-pb-64'>
      <h1 class='tw-text-h1'>{{ 'sections.cart.title' | t }}</h1>
    </div>

    {% if cart == empty %}
      <div class='cart__warnings'>
        <h1 class='cart__empty-text'>{{ 'sections.cart.empty' | t }}</h1>
        <a href='{{ routes.all_products_collection_url }}' class='button'>
          {{ 'general.continue_shopping' | t }}
        </a>

        {%- if shop.customer_accounts_enabled and customer == null -%}
          <h2 class='cart__login-title'>{{ 'sections.cart.login.title' | t }}</h2>
          <p class='cart__login-paragraph'>
            {{ 'sections.cart.login.paragraph_html' | t: link: routes.account_login_url }}
          </p>
        {%- endif -%}
      </div>
    {% else %}
      <div class='tw-flex tw-flex-col tablet:tw-flex-row'>
        <!-- Cart Items Wrapper -->
        <div class='cart-items-wrapper-{{ section.id }} tablet:tw-w-2/3 tw-order-2 tablet:tw-order-1'>
          <form action='{{ routes.cart_url }}' class='cart__contents' method='post' id='cart'>
            <div class='cart__items' id='main-cart-items'>
              <div class='js-contents'>
                {%- for item in cart.items -%}
                  <div class='tablet:tw-flex tw-items-center tw-justify-between tw-bg-background-light tw-rounded tw-py-12 tw-pl-8 tw-pr-28 tw-mb-12'>
                    <div class='tw-flex tw-items-center'>
                      <div>
                        <div class='tw-mix-blend-darken'>
                          <img
                            src='{{ item.image | image_url: width: 300 }}'
                            class='cart-item__image'
                            alt='{{ item.image.alt | escape }}'
                            loading='lazy'
                            width='150'
                            height='{{ 150 | divided_by: item.image.aspect_ratio | ceil }}'
                          >
                        </div>
                      </div>
                      <div class="tw-max-w-[350px] tablet:tw-pr-24">
                        <p class='tw-text-small tw-text-text-gray tw-pt-4'>{{ item.product.vendor }}</p>
                        <a href='{{ item.url }}' class='tw-text-h4'>{{ item.product.title | escape }}</a>
                        <div class='tablet:tw-flex'>
                          <div class='tw-mr-12 tw-text-small'>
                            {{ item.original_price | money }}
                          </div>
                          {%- if item.product.has_only_default_variant == false -%}
                            {%- for option in item.options_with_values -%}
                              <div class='tablet:tw-flex tw-text-small tw-text-text-gray'>
                                <span class='tw-mr-4'>{{ option.name }}:</span>
                                <span>{{ option.value }}</span>
                              </div>
                            {%- endfor -%}
                          {%- endif -%}
                        </div>
                      </div>
                    </div>

                    <div class='tw-flex tw-items-center tw-justify-end'>
                      <div class='tw-flex tw-items-center tw-mr-24'>
                        <quantity-input class='quantity cart-quantity tw-mr-12'>
                          <button class='quantity__button' name='minus' type='button'>
                            <span class='visually-hidden'>
                              {{- 'products.product.quantity.decrease' | t: product: item.product.title | escape -}}
                            </span>
                            <span class='svg-wrapper'>
                              {{- 'icon-minus.svg' | inline_asset_content -}}
                            </span>
                          </button>
                          <input
                            class='quantity__input tw-bg-transparent'
                            data-quantity-variant-id='{{ item.variant.id }}'
                            type='number'
                            name='updates[]'
                            value='{{ item.quantity }}'
                            data-cart-quantity='{{ cart | item_count_for_variant: item.variant.id }}'
                            min='0'
                            data-min='{{ item.variant.quantity_rule.min }}'
                            {% if item.variant.quantity_rule.max != null %}
                              max='{{ item.variant.quantity_rule.max }}'
                            {% endif %}
                            step='{{ item.variant.quantity_rule.increment }}'
                            aria-label='{{ 'products.product.quantity.input_label' | t: product: item.product.title | escape }}'
                            id='Quantity-{{ item.index | plus: 1 }}'
                            data-index='{{ item.index | plus: 1 }}'
                          >
                          <button class='quantity__button' name='plus' type='button'>
                            <span class='visually-hidden'>
                              {{- 'products.product.quantity.increase' | t: product: item.product.title | escape -}}
                            </span>
                            <span class='svg-wrapper'>
                              {{- 'icon-plus.svg' | inline_asset_content -}}
                            </span>
                          </button>
                        </quantity-input>
                        <cart-remove-button
                          id='Remove-{{ item.index | plus: 1 }}'
                          data-index='{{ item.index | plus: 1 }}'
                        >
                          <a
                            href='{{ item.url_to_remove }}'
                            class='button button--tertiary'
                            aria-label='{{ 'sections.cart.remove_title' | t: title: item.title | escape }}'
                          >
                            <span class='svg-wrapper'>
                              {{- 'icon-remove.svg' | inline_asset_content -}}
                            </span>
                          </a>
                        </cart-remove-button>
                      </div>
                      <span class='tw-text-[18px] desktop:tw-text-[22px] tw-leading-[26px] tw-font-bold'>
                        {{ item.final_line_price | money }}
                      </span>
                    </div>
                  </div>
                {%- endfor -%}
              </div>
            </div>
          </form>
        </div>

        <!-- Sticky Cart Footer -->
        <div class="scroll-trigger tablet:tw-pl-24 tablet:tw-w-1/3 tw-pb-12 tw-order-1 tablet:tw-order-2">
          <div class='cart-footer-sticky tw-py-24 tw-px-24 tw-bg-background-light tw-rounded tw-w-full'>
            <div class='cart__blocks'>
              <div class='js-contents'>
                {%- if cart.cart_level_discount_applications.size > 0 -%}
                  <ul class='discounts list-unstyled' role='list' aria-label='{{ 'customer.order.discount' | t }}'>
                    {%- for discount in cart.cart_level_discount_applications -%}
                      <li class='discounts__discount discounts__discount--position'>
                        {{- 'icon-discount.svg' | inline_asset_content -}}
                        {{ discount.title | escape }}
                        (-{{ discount.total_allocated_amount | money }})
                      </li>
                    {%- endfor -%}
                  </ul>
                {%- endif -%}

                <div class='tw-flex tw-items-center tw-justify-between tw-mb-24'>
                  <h2 class='tw-text-h4'> {{ 'sections.cart.estimated_total' | t }}</h2>
                  <p class='tw-text-[22px] desktop:tw-text-[32px] tw-leading-[26px] tw-font-bold'>{{ cart.total_price | money_with_currency }}</p>
                </div>
              </div>

              <div class='cart__ctas'>
                <button
                  type='submit'
                  id='checkout'
                  class='cart__checkout-button button'
                  name='checkout'
                  form='cart'
                >
                  {{ 'sections.cart.checkout' | t }}
                </button>
              </div>

              {% comment %} {%- if additional_checkout_buttons -%}
                <div class='cart__dynamic-checkout-buttons additional-checkout-buttons'>
                  {{ content_for_additional_checkout_buttons }}
                </div>
              {%- endif -%} {% endcomment %}

              <div id='cart-errors'></div>
            </div>
          </div>
        </div>
      </div>
    {% endif %}

    <p class='visually-hidden' id='cart-live-region-text' aria-live='polite' role='status'></p>
    <p
      class='visually-hidden'
      id='shopping-cart-line-item-status'
      aria-live='polite'
      aria-hidden='true'
      role='status'
    >
      {{ 'accessibility.loading' | t }}
    </p>
  </div>
</div>

{% schema %}
{
  "name": "Cart with Sticky Footer",
  "settings": [
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 36
    }
  ],
  "presets": [
    {
      "name": "Cart with Sticky Footer"
    }
  ]
}
{% endschema %}
